# `bob_shared_library`

> This is a legacy target and will not be supported by the [Gazelle plugin](../../gazelle/README.md)

```bp
bob_shared_library {
    name, srcs, exclude_srcs, enabled, build_by_default, add_to_alias, defaults, target_supported, target, host_supported, host, out, cflags, export_cflags, cxxflags, asflags, conlyflags, ldflags, static_libs, shared_libs, reexport_libs, whole_static_libs, ldlibs, generated_headers, generated_sources, generated_deps, tags, owner, strip, include_dirs, local_include_dirs, export_local_include_dirs, export_include_dirs, export_local_system_include_dirs, export_system_include_dirs, build_wrapper, forwarding_shlib, add_lib_dirs_to_rpath, install_group, install_deps, relative_install_path, debug_info, post_install_tool, post_install_cmd, post_install_args, version_script,
}
```

<!--
This is a legacy target which is no longer recommended and will not be supported by the Gazelle generator.
Please see [this migration guide](TODO.md)
 -->

Used to create a shared library i.e. `.so` file.

Supports:

- [features](../features.md)
- [defaults](./bob_defaults.md)

## Properties

|                                                                                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| ------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [`name`](properties/common_properties.md#name)                                                         | String; required                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [`srcs`](properties/common_properties.md#srcs)                                                         | List of sources; default is `[]`                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `exclude_srcs`                                                                                         | List of exclude patterns; default is `[]`<br> Files to be removed from `srcs`.<br>Supports wildcards, with the same caveat as `srcs`.                                                                                                                                                                                                                                                                                                                       |
| [`enabled`](properties/common_properties.md#enabled)                                                   | Boolean; default is `true`.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `build_by_default`                                                                                     | Boolean; default is `true`<br>Whether it is built by default in a build with no targets requested.                                                                                                                                                                                                                                                                                                                                                          |
| `add_to_alias`                                                                                         | Target; default is `none`<br>Allows this alias to add itself to another alias.<br>Should refer to existing `bob_alias`.                                                                                                                                                                                                                                                                                                                                     |
| [`defaults`](properties/legacy_properties.md#defaults)                                                 | List of [`bob_defaults`](bob_defaults.md); default is `[]`                                                                                                                                                                                                                                                                                                                                                                                                  |
| [`target_supported`](properties/common_properties.md#target_supported)                                 | Boolean; default is `true`.                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| [`target`](properties/common_properties.md#target)                                                     | Property map; default is `{}`.                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [`host_supported`](<(properties/common_properties.md#host_supported)>)                                 | Boolean; default is `false`.                                                                                                                                                                                                                                                                                                                                                                                                                                |
| [`host`](<(properties/common_properties.md#host)>)                                                     | Property map; default is `{}`.                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `out`                                                                                                  | String;<br>Alternate output name, used for the file name and Android rules.                                                                                                                                                                                                                                                                                                                                                                                 |
| [`cflags`](properties/legacy_properties.md#cflags)                                                     | List of strings; default is `[]`<br>Flags used for C/C++ compilation.                                                                                                                                                                                                                                                                                                                                                                                       |
| [`export_cflags`](properties/legacy_properties.md#export_cflags)                                       | List of strings; default is `[]`<br>Same as [`cflags`](properties/legacy_properties.md#cflags) but flags are also propagated to the users of the library.                                                                                                                                                                                                                                                                                                   |
| `conlyflags`                                                                                           | List of strings; default is `[]`<br>Flags used for C compilation.<br>See [`cflags`](properties/legacy_properties.md#cflags)                                                                                                                                                                                                                                                                                                                                 |
| `cxxflags`                                                                                             | List of strings; default is `[]`<br>Flags used for C++ compilation.<br>See [`cflags`](properties/legacy_properties.md#cflags)                                                                                                                                                                                                                                                                                                                               |
| [`asflags`](properties/legacy_properties.md#asflags)                                                   | List of strings; default is `[]`<br>Flags used for assembly compilation.                                                                                                                                                                                                                                                                                                                                                                                    |
| [`ldflags`](properties/legacy_properties.md#ldflags)                                                   | List of strings; default is `[]`<br>Flags used for linking.                                                                                                                                                                                                                                                                                                                                                                                                 |
| [`ldlibs`](properties/legacy_properties.md#ldlibs)                                                     | List of strings; default is `[]`<br>Linker flags required to link to the necessary system libraries.                                                                                                                                                                                                                                                                                                                                                        |
| [`static_libs`](properties/legacy_properties.md#static_libs)                                           | List of targets; default is `[]`<br>The list of static lib modules that this library depends on.                                                                                                                                                                                                                                                                                                                                                            |
| [`shared_libs`](properties/legacy_properties.md#shared_libs)                                           | List of targets; default is `[]`<br>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [`reexport_libs`](properties/legacy_properties.md#reexport_libs)                                       | List of targets; default is `[]`<br>The exported cflags and includes of dependencies listed in `reexport_libs` are also exported to users of the current module.                                                                                                                                                                                                                                                                                            |
| `whole_static_libs`                                                                                    | <br>Static libraries linked with a shared library using `whole_static_libs` will be linked with the `-Wl,--whole-archive` linker flag. This ensures that the entire contents of the static libraries are include in the shared library. Without this, the linker may remove unused object files.<br>This will include all the static libs' objects in the shared library (as opposed to normal static linking, which will only include unresolved symbols). |
| [`generated_headers`](properties/legacy_properties.md#generated_headers)                               | List of targets; default is `[]`<br>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [`generated_sources`](properties/legacy_properties.md#generated_sources)                               | List of targets; default is `[]`<br>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [`generated_deps`](properties/legacy_properties.md#generated_deps)                                     | List of targets; default is `[]`<br>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| [`owner`](properties/legacy_properties.md#owner)                                                       | String; default is `none`; **deprecated**<br> If set, then the module is considered proprietary.                                                                                                                                                                                                                                                                                                                                                            |
| [`strip`](properties/legacy_properties.md#strip)                                                       | Boolean; default is `false`.<br> When set, strip symbols and debug information from libraries and binaries.                                                                                                                                                                                                                                                                                                                                                 |
| [`include_dirs`](properties/legacy_properties.md#include_dirs)                                         | List of strings; default is `[]`<br>A list of include directories to use. These are expected to be system headers, and will usually be an absolute path.                                                                                                                                                                                                                                                                                                    |
| [`local_include_dirs`](properties/legacy_properties.md#local_include_dirs)                             | List of strings; default is `[]`<br>A list of include directories to use. These are relative to the `build.bp` containing the module definition                                                                                                                                                                                                                                                                                                             |
| [`export_local_include_dirs`](properties/legacy_properties.md#export_local_include_dirs)               | List of strings; default is `[]`<br>Same as `local_include_dirs` but paths are exported to users of the library.                                                                                                                                                                                                                                                                                                                                            |
| [`export_include_dirs`](properties/legacy_properties.md#export_include_dirs)                           | List of strings; default is `[]`<br>Same as `include_dirs` but paths are exported to users of the library.                                                                                                                                                                                                                                                                                                                                                  |
| [`export_local_system_include_dirs`](properties/legacy_properties.md#export_local_system_include_dirs) | List of strings; default is `[]`<br>Same as `local_include_dirs` but paths are exported to users of the library using `-isystem`                                                                                                                                                                                                                                                                                                                            |
| [`export_system_include_dirs`](properties/legacy_properties.md#export_system_include_dirs)             | List of strings; default is `[]`<br>Same as `include_dirs` but paths are exported to users of the library using `-isystem`.                                                                                                                                                                                                                                                                                                                                 |
| [`forwarding_shlib`](properties/legacy_properties.md#forwarding_shlib)                                 | Boolean; default is `false`<br>This is a shared library that pulls in one or more shared libraries to resolve symbols that the binary needs.                                                                                                                                                                                                                                                                                                                |
| [`build_wrapper`](properties/legacy_properties.md#build_wrapper)                                       | String; default is `none`.<br>Wrapper for all build commands.                                                                                                                                                                                                                                                                                                                                                                                               |
| [`add_lib_dirs_to_rpath`](properties/legacy_properties.md#add_lib_dirs_to_rpath)                       | Boolean; default is `false`<br>If true, the module's shared libraries' directories will be added to its DT_RUNPATH entry.                                                                                                                                                                                                                                                                                                                                   |
| [`install_group`](properties/legacy_properties.md#install_group)                                       | Target; default is `none`<br>Module name of a `bob_install_group` specifying an installation directory.                                                                                                                                                                                                                                                                                                                                                     |
| [`install_deps`](properties/legacy_properties.md#install_deps)                                         | List of targets; default is `[]`<br>Other modules which must be installed.                                                                                                                                                                                                                                                                                                                                                                                  |
| `relative_install_path`                                                                                | String; default is `none`<br>Path to install to, relative to the install_group's path.                                                                                                                                                                                                                                                                                                                                                                      |
| [`debug_info`](properties/legacy_properties.md#debug_info)                                             | Target; default is `none`<br>Module name of a `bob_install_group` specifying an installation directory for debug information.                                                                                                                                                                                                                                                                                                                               |
| `post_install_tool`                                                                                    | String <br>Script used during post install. Not supported on Android.                                                                                                                                                                                                                                                                                                                                                                                       |
| [`post_install_cmd`](properties/legacy_properties.md#post_install_cmd)                                 | String; default is `none`<br>Command to execute on file(s) after they are installed.                                                                                                                                                                                                                                                                                                                                                                        |
| [`post_install_args`](properties/legacy_properties.md#post_install_args)                               | List of strings; default is `[]`<br>Arguments to insert into `post_install_cmd`.                                                                                                                                                                                                                                                                                                                                                                            |
| `version_script`                                                                                       | Linker script used for [symbol versioning](../user_guide/libraries_2.md#markdown-header-symbol-versioning).                                                                                                                                                                                                                                                                                                                                                 |
| [`tags`](properties/common_properties.md#tags)                                                         | List of strings; default is `[]`                                                                                                                                                                                                                                                                                                                                                                                                                            |
